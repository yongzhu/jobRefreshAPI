{
    "swagger": "2.0",
    "info": {
        "description": "As we expose more self serve features to end clients, we need to track when and what customers made changes and provide that insight to both end clients and internal support team. Today our individual CB products track customer behavior separately, most of time not completely. We also store related data in separate locations which made it difficult to have a complete view of what changes customers have made. With the launch of this micro service and associated API, we will give CB product families a centralized location to submit configuration changes made by end clients.",
        "version": "1.0.0",
        "title": "Micro Service: Client Config Log "
    },
    "host": "api.careerbuilder.com",
    "basePath": "/corporate/AdminTools",
    "schemes": [
        "https"
    ],
    "paths": {
        "/ClientConfigLogs": {
            "post": {
                "tags": [
                    "Create Client Config Log Data"
                ],
                "summary": " track config data change and related details",
                "description": "",
                "operationId": "",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "parameters": [                                            
                    {
                        "in": "body",
                        "name": "body",
                        "description": "create log data",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/ConfigLogRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Success",
                        "headers":{
                            "Location": {
                                "type": "string",
                                "description": "gives the URL of where you can find the newly created thing."
                            },
                            "ETag": {
                                "type": "string",
                                "description": "be different when a resource changes."
                            }
                        },
                        "schema": {
                            "$ref": "#/definitions/APICreateResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/APIResponseErrors"
                        }
                    },
                    "404": {
                        "description": "Not Found"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        }
    },
    "definitions": {
        "ConfigLogRequest": {
            "type": "object",
            "required": [
                "account_id",
                "customer_facing_text", 
                "action_type"
            ],
            "properties": {
                "end_client_entity_id": {
                    "type": "string",
                    "example": "demoUserEmail@test.com"
                },
                "product_instance_id": {
                    "type": "string",
                    "example": "cd9f8866-3be3-11e7-b6c8-12cdb5598af4"
                },
                "account_id": {
                    "type": "string",
                    "example": "AOB56H5W7PHCPN3PB16"
                },
                "field_name_changed": {
                    "type": "string",
                    "example": "Bullhorn.UserName"
                },
                "customer_facing_text": {
                    "type": "string",
                    "example": "User Name for Bullhorn changed from UserNameA to UserNameB"
                },
                "old_value": {
                    "type": "string",
                    "example": "UserNameA"
                },
                "new_value": {
                    "type": "string",
                    "example": "UserNameB"
                },
                "system_entity_id": {
                    "type": "string",
                    "example": "J3G14F62ZDMT4RYF6VH"
                },
                "access_type": {
                    "type": "string",
                    "example": "member search"
                },
                "action_type": {
                    "type": "string",
                    "enum": ["data_change", "login", "logout", "file_change", "product_change"],
                    "example": "data_change"
                },
                "trust_boundary_client_ip": {
                    "type": "string",
                    "example": "203.116.5.14"
                },
                "context_boundary_network_ip": {
                    "type": "string",
                    "example": "74.125.68.103"
                },
                "change_date_time": {
                    "type": "string",
                    "format": "date-time"
                }
            }
        },
        "APIResponseError": {
            "type": "object",
            "properties": {               
                "type": {
                    "type": "string",
                    "example": "some data is missing"
                },
                "message":{
                    "type": "string",
                    "enum": ["account_id is required", "customer_facing_text is required", "format_of_value required", "action_type is required", "action_type should be one of data_change, login, logout, file_change, product_change", "unknown error"],
                    "example": "account_id is required"
                },
                "code":{
                    "type": "string",
                    "example": "001"
                }
            }
        },
        "ConfigLogResult": {
            "type": "object",
            "properties": {
                "data": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "string",
                            "example": "success"
                        }
                    }
                }
            }
        },
        "APICreateResponse": {
            "type": "object",
            "properties": {               
                "status": {
                    "type": "string",
                    "example": "create new log successfully"
                }                    
            }
        },
        "APIResponseErrors": {
            "type": "object",
            "properties": {
                "errors": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/APIResponseError"
                    }
                }
            }
        }       
    }
}